---
title: "R Notebook"
output: html_notebook
---

## Analyse data from Joyce et al. 2021 GRL

### Procedure
- Use the dynamic atmospheric transport control data for Point Barrow (where eveything is variable). See file names.
- Aggregate data in yearly files into a pandas dataframe
- Calculate monthly means
- Read in Point Barrow observations data
- Plot simulated vs observed CO2 (Joyce figure S8)
- Apply ccgcrv to observed and simulations to get a fit to seasonal CO2
- Calculate CO2 seasonal amplitude changes and plot

```{python}
# Set python enviroment to conda base 
import pandas as pd
import os
import glob
import sys
import numpy as np
```

Get list of files
```{python}
# Files with output for constant atmopsheric transport
files = sorted(glob.glob(os.path.realpath("../../../Data/Joyce_et_al_2021_GRL/BRW_station_co2_atmos_const*")))
```

Concatenate all data into a data frame
```{python}
for i in range(0, len(files)):
    f = files[i]
    # print(f)
    data_in = pd.read_csv(f, delim_whitespace=True, header=None, skiprows=3)
    if i == 0:
        colnames = pd.read_csv(f, sep=',', skiprows=2, nrows=0, skipinitialspace=True).columns.tolist()
        data_in.columns = colnames
        data = data_in  
    else:
        data_in.columns = colnames
        data = pd.concat([data, data_in])
```

Get monthly averages
```{python}
data_monthly = data.groupby(['Year', 'Month']).agg(np.mean)
```


